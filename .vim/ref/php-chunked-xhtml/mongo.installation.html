<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>インストール手順</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mongo.manual.html">マニュアル</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mongo.tutorial.html">チュートリアル</a></div>
 <div class="up"><a href="mongo.manual.html">マニュアル</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="mongo.installation" class="section">
 <h2 class="title">インストール手順</h2>
 <p class="para">
  MongoDB PHP ドライバは、ほぼすべてのシステムで動作します。
  Windows、Mac OS X、Unix そして Linux。リトルエンディアンマシンおよびビッグエンディアンマシン。
  32 ビットマシンおよび 64 ビットマシン。PHP 5.1、5.2 および 5.3。
 </p>
 <p class="para">
  この <a href="http://pecl.php.net/" class="link external">&raquo;&nbsp;PECL</a> 拡張
モジュールは PHP にバンドルされていません。 このページでは、さまざまなシステムへのインストールに関するより詳細な情報とトラブルシューティングを扱います。
 </p>

 <ul class="itemizedlist">
  <li class="listitem">
   <p class="para">
    <a href="#mongo.installation.nix" class="link external">&raquo;&nbsp;*NIX へのインストール</a>
   </p>
  </li>
  <li class="listitem">
   <p class="para">
    <a href="#mongo.installation.manual" class="link external">&raquo;&nbsp;手動インストール</a>
   </p>
  </li>
  <li class="listitem">
   <p class="para">
    <a href="#mongo.installation.osx" class="link external">&raquo;&nbsp;OS X</a>
   </p>
  </li>
  <li class="listitem">
   <p class="para">
    <a href="#mongo.installation.gentoo" class="link external">&raquo;&nbsp;Gentoo</a>
   </p>
  </li>
  <li class="listitem">
   <p class="para">
    <a href="#mongo.installation.fedora" class="link external">&raquo;&nbsp;Fedora</a>
   </p>
  </li>
  <li class="listitem">
   <p class="para">
    <a href="#mongo.installation.windows" class="link external">&raquo;&nbsp;Windows へのインストール</a>
   </p>
  </li>
  <li class="listitem">
   <p class="para">
    <a href="#mongo.installation.thirdparty" class="link external">&raquo;&nbsp;その他のインストール説明</a>
   </p>
  </li>
 </ul>

 <div class="section" id="mongo.installation.nix">
  <h2 class="title">*NIX へのインストール</h2>

  <p class="para">
   <div class="example-contents">
<div class="cdata"><pre>

$ sudo pecl install mongo

</pre></div>
   </div>

   を実行します。
  </p>

  <p class="para">
   CentOS あるいは Redhat を使っている場合は、Csoke Arpad が作った
   <a href="http://csaapi.hu/RHEL/x86_64/php_mongo/" class="link external">&raquo;&nbsp;RPM</a>
   を使うことができます。
  </p>

  <p class="para">
   php.ini ファイルに次の行を追加します。
   <div class="example-contents">
<div class="cdata"><pre>

extension=mongo.so

</pre></div>
   </div>

  </p>

  <p class="para">
   インストール中に pecl が out of memory となる場合は、php.ini の memory_limit
   が 32M 以上あるかどうかを確認しましょう。
  </p>
 </div>

 <div class="section" id="mongo.installation.manual">
  <h2 class="title">手動インストール</h2>

  <p class="para">
   ドライバの開発者や最新のバグフィックス版に興味のあるかたは、
   <a href="http://github.com/mongodb/mongo-php-driver" class="link external">&raquo;&nbsp;Github</a>
   にある最新のソースコードからドライバをコンパイルすることもできます。
   Github に行き、&quot;download&quot; ボタンをクリックしましょう。そして以下のようにします。

   <div class="example-contents">
<div class="cdata"><pre>

$ tar zxvf mongodb-mongodb-php-driver-&lt;commit_id&gt;.tar.gz
$ cd mongodb-mongodb-php-driver-&lt;commit_id&gt;
$ phpize
$ ./configure
$ sudo make install

</pre></div>
   </div>

  </p>

  <p class="para">
   php.ini を次のように変更します。
  </p>
  <ul class="itemizedlist">
   <li class="listitem">
    <p class="para">
     <em class="emphasis">extension_dir</em> 変数が
     <em class="emphasis">mongo.so</em> の場所を指すようにします。
     ビルド中に、PHP ドライバをどこにインストールするのかがこのように表示されます。
     <div class="example-contents">
<div class="cdata"><pre>

      Installing &#039;/usr/lib/php/extensions/no-debug-zts-20060613/mongo.so&#039;

</pre></div>
     </div>


      この場所が PHP の拡張モジュール用ディレクトリと一致するかどうかは、次のようにして確認します。

     <div class="example-contents">
<div class="cdata"><pre>

      $ php -i | grep extension_dir
        extension_dir =&gt; /usr/lib/php/extensions/no-debug-zts-20060613 =&gt;
      /usr/lib/php/extensions/no-debug-zts-20060613  

</pre></div>
     </div>


     もし一致しない場合は、php.ini の <em class="emphasis">extension_dir</em> を変更するか、あるいは <em class="emphasis">mongo.so</em>
     を移動させます。
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     PHP の起動時に拡張モジュールを読み込むために、次の行を追加します。

     <div class="example-contents">
<div class="cdata"><pre>

      extension=mongo.so

</pre></div>
     </div>


    </p>
   </li>
  </ul>

  <div class="section" id="mongo.installation.osx">
   <h2 class="title">OS X</h2>

   <p class="para">
    autoconf が見つからない場合は、Xcode をインストールしなければなりません
    (これは、OS X のインストール DVD の中にあります。あるいは Apple
    のウェブサイトから無料でダウンロードすることもできます)。
   </p>
   
   <p class="para">
    XAMPP を使っている場合は、次のコマンドでドライバをコンパイルすることができます。
    <div class="example-contents">
<div class="cdata"><pre>

sudo /Applications/XAMPP/xamppfiles/bin/pecl install mongo

</pre></div>
    </div>

   </p>

   <p class="para">
    MAMP を使っている (あるいは XAMPP を使っているけれども上のコマンドがうまく動かない)
    場合は、コンパイル済みのバイナリを
    <a href="http://github.com/mongodb/mongo-php-driver/downloads" class="link external">&raquo;&nbsp;Github</a> から取得します
    (最新版の &quot;osx&quot; の中から、PHP のバージョンにあわせたものをダウンロードします)。
    アーカイブから mongo.so を取り出して MAMP あるいは XAMPP の拡張モジュール用ディレクトリに追加し、
    php.ini に
    <div class="example-contents">
<div class="cdata"><pre>

      extension=mongo.so

</pre></div>
    </div>

    を追加してからサーバを再起動します。
   </p>
  </div>

  <div class="section" id="mongo.installation.gentoo">
   <h2 class="title">Gentoo</h2>
   <p class="para">
    Gentoo には PHP ドライバのパッケージ dev-php5/mongo があり、
    次のようにすればインストールできます。
   </p>
   <div class="example-contents">
<div class="cdata"><pre>

$ sudo emerge -va dev-php5/mongo

</pre></div>
   </div>


   <p class="para">
    PECL を使う場合は、libtool のバージョンが違うというエラーが出るかもしれません。
    ソースからコンパイルするには、aclocal と autoconf を実行しなければなりません。
   </p>
   <div class="example-contents">
<div class="cdata"><pre>

$ phpize &amp;&amp; aclocal &amp;&amp; autoconf &amp;&amp; ./configure &amp;&amp; make &amp;&amp; make install

</pre></div>
   </div>

  </div>
  <div class="section" id="mongo.installation.fedora">
   <h2 class="title">Red Hat</h2>
   <p class="para">
    Fedora や CentOS も含みます。
   </p>
   <p class="para">
    これらのシステム上の Apache のデフォルト設定では
    リクエストがネットワーク接続できないようにしており、
    データベースに接続しようとすると &quot;Permission denied&quot;
    というエラーが発生します。もしこの現象に遭遇したら、次のコマンドを実行しましょう。
    <div class="example-contents">
<div class="cdata"><pre>
$ /usr/sbin/setsebool -P httpd_can_network_connect 1 
</pre></div>
    </div>

    そして Apache を再起動します (この問題は、SELinux の環境で発生します)。
   </p>
  </div>
 </div>

 <div class="section" id="mongo.installation.windows">
  <h2 class="title">Windows へのインストール</h2>

  <p class="para">
   リリースごとのコンパイル済みバイナリが
   <a href="http://github.com/mongodb/mongo-php-driver/downloads" class="link external">&raquo;&nbsp;Github</a> にあります。
   バージョン、スレッドセーフ/非スレッドセーフ、VCのライブラリのさまざまな組み合わせに対応しています。
   アーカイブを Unzip して、php_mongo.dll を PHP 拡張モジュールのディレクトリ
   (デフォルトは &quot;ext&quot;) に置きましょう。
  </p>

  <p class="para">
   最新の (リリース前の) コードをコンパイルした Windows バイナリも、
   コミットのたびに作られています。この zip には、php_mongo.dll が入った zip
   と version.txt が含まれています。version.txt は常に手元に置いてください。
   疑問や問題が発生した場合に、それを使えば正確なバージョンを開発者に伝えることができます
   (バージョン番号は非常に長くて意味がなさそうな数値ですが、
   開発者たちにとってはそれが重要な意味を持つのです!)。
  </p>
  <p class="para">
   最新のバグフィックス版を取得するは、
   インストールしている PHP に対応したバイナリをダウンロードします。
  </p>
  <ul class="itemizedlist">
   <li class="listitem">
    <p class="para">
     <a href="http://downloads.mongodb.org/mongo-latest-php5.2vc6.zip" class="link external">&raquo;&nbsp;
      PHP 5.2 VC6 Non-Thread-Safe Mongo extension
     </a>
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <a href="http://downloads.mongodb.org/mongo-latest-php5.2vc6ts.zip" class="link external">&raquo;&nbsp;
      PHP 5.2 VC6 Thread-Safe Mongo extension
     </a>
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <a href="http://downloads.mongodb.org/mongo-latest-php5.3vc6.zip" class="link external">&raquo;&nbsp;
      PHP 5.3 VC6 Non-Thread-Safe Mongo extension
     </a>
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <a href="http://downloads.mongodb.org/mongo-latest-php5.3vc6ts.zip" class="link external">&raquo;&nbsp;
      PHP 5.3 VC6 Thread-Safe Mongo extension
     </a>
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <a href="http://downloads.mongodb.org/mongo-latest-php5.3vc8.zip" class="link external">&raquo;&nbsp;
      PHP 5.3 VC8 Non-Thread-Safe Mongo extension
     </a>
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <a href="http://downloads.mongodb.org/mongo-latest-php5.3vc8ts.zip" class="link external">&raquo;&nbsp;
      PHP 5.3 VC8 Thread-Safe Mongo extension
     </a>
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <a href="http://downloads.mongodb.org/mongo-latest-php5.3vc9.zip" class="link external">&raquo;&nbsp;
      PHP 5.3 VC9 Non-Thread-Safe Mongo extension
     </a>
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <a href="http://downloads.mongodb.org/mongo-latest-php5.3vc9ts.zip" class="link external">&raquo;&nbsp;
      PHP 5.3 VC9 Thread-Safe Mongo extension
     </a>
    </p>
   </li>
  </ul>

  <p class="para">
   そして、php.ini に次の行を追加します。
   <div class="example-contents">
<div class="cdata"><pre>

extension=php_mongo.dll

</pre></div>
   </div>

  </p>
 </div>

 <div class="section" id="mongo.installation.thirdparty">
  <h2 class="title">その他のインストール説明</h2>
  
  <p class="para">
   PHP 用ドライバのインストールに関するすばらしいチュートリアルが、
   多くのかたによって公開されています。
  </p>

  <ul class="itemizedlist">
   <li class="listitem">
    <p class="para">
     <a href="http://www.vimeo.com/8005503" class="link external">&raquo;&nbsp;
      PHP 5.3.1 with Xdebug, MongoDB and Lithium on Ubuntu 9.10 / Apache 2.2
     </a>
    </p>
    <p class="para">
     Jon Adams によるすばらしい動画です。
     Apache, PHP, Xdebug, MongoDB, そして Lithium のインストール手順をひとつひとつ説明しています。
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <a href="http://javierav.com/2009-10-instalando-mongodb-driver-php-en-ubuntu-9-04.html" class="link external">&raquo;&nbsp;
      Installing MongoDB and the PHP driver on Ubuntu 9.04
     </a>
    </p>
    <p class="para">
     Javier Aranda によるスペイン語の記事です (<a href="http://translate.google.com/translate?js=n&prev=_t&hl=en&ie=UTF-8&layout=2&eotf=1&sl=auto&tl=en&u=http://javierav.com/2009-10-instalando-mongodb-driver-php-en-ubuntu-9-04.html" class="link external">&raquo;&nbsp;
      英語訳</a>)。
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <a href="http://technosophos.com/content/os-x-installing-mongodb-and-php-mongo-driver" class="link external">&raquo;&nbsp;
      OS X: Installing MongoDB and the PHP Mongo Driver
     </a>
    </p>
    <p class="para">
     Matt Butcher によるものです。
    </p>
   </li>
  </ul>
 </div>

</div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mongo.manual.html">マニュアル</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mongo.tutorial.html">チュートリアル</a></div>
 <div class="up"><a href="mongo.manual.html">マニュアル</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
