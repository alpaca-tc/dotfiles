<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>特殊関数__sleep および
    __wakeup</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="oop4.serialization.html">オブジェクトのシリアル化 - セッションでのオブジェクト</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="oop4.newref.html">コンストラクタの内部での参照</a></div>
 <div class="up"><a href="oop4.html">クラスとオブジェクト (PHP 4)</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="oop4.magic-functions" class="sect1">
   <h2 class="title">
    特殊関数<em>__sleep</em> および
    <em>__wakeup</em>
   </h2>
   <p class="para">
    <span class="function"><a href="function.serialize.html" class="function">serialize()</a></span> は、クラスに特殊な名前
    <em>__sleep</em> の関数があるかどうかを調べます。
    もしあれば、シリアル化の前にその関数を実行します。
    この関数で、オブジェクトをクリアすることができます。
    またこの関数は、シリアル化するオブジェクトについて、
    すべての変数の名前を配列で返すことが前提となっています。
    このメソッドが何も返さなかった場合は、<strong><code>NULL</code></strong>
    がシリアル化され、<strong><code>E_NOTICE</code></strong> が発生します。
   </p>
   
   <p class="para">
    典型的な <em>__sleep</em> の使用法は、
    途中のデータをコミットしたり、
    似たようなタスクのクリアを行うといったものです。
    また、オブジェクトが非常に大きく、かつ、完全に保存する必要がない場合、
    この関数が有用です。
   </p>
   
   <p class="para">
    逆に、 <span class="function"><a href="function.unserialize.html" class="function">unserialize()</a></span> は、特殊な名前
    <em>__wakeup</em> を有する関数が存在するかどうかを確認し
    ます。これが存在する場合、この関数は、そのオブジェクトが有する全て
    のリソースを再構築することが可能です。
   </p>
   
   <p class="para">
    典型的な<em>__wakeup</em>の使用法は、シリアル化により失っ
    たデータベース接続を全て再度復旧したり、その他の再初期化作業を実行
    したりといったものです。
   </p>
 </div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="oop4.serialization.html">オブジェクトのシリアル化 - セッションでのオブジェクト</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="oop4.newref.html">コンストラクタの内部での参照</a></div>
 <div class="up"><a href="oop4.html">クラスとオブジェクト (PHP 4)</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
